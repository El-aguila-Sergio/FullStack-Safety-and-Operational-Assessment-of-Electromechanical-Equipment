<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”¨æˆ·ä¸ªäººä¸­å¿ƒ - æœºç”µè®¾å¤‡å®‰å…¨è¯„ä¼°ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* ç¡®ä¿ body å æ»¡æ•´ä¸ªè§†å£ */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
        }

        /* æ•´ä½“èƒŒæ™¯ - ä¸æ°”è±¡ç›‘æµ‹å¤§å±ä¸€è‡´çš„é£æ ¼ */
        body {
            background: 
                linear-gradient(rgba(74, 85, 112, 0.8), rgba(66, 80, 122, 0.8)),
                url('https://vcg00.cfp.cn/creative/vcg/800/new/VCG41N1358149692.jpg');
            background-size: cover;
            background-position: center;
            color: #e0e0e0;
            display: flex;
            flex-direction: column;
        }

        /* å¤´éƒ¨æ ·å¼ */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 15px;
            background: rgba(0, 10, 30, 0.5);
            color: #e0e0e0;
            width: 100%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid rgba(0, 150, 255, 0.3);
            backdrop-filter: blur(5px);
            z-index: 1000;
            position: relative;
            flex-shrink: 0;
            height: 50px; /* å›ºå®šé«˜åº¦ */
        }

        .header-title {
            font-size: 1.8em;
            margin: 0;
            flex-grow: 1;
            text-align: center;
            color: #00c8ff;
            text-shadow: 0 0 8px rgba(0, 200, 255, 0.5);
            letter-spacing: 2px;
        }

        .header-date {
            font-size: 1em;
            margin: 0;
            position: relative;
            left: -80px;
            color: #00c8ff;
            font-weight: bold;
        }

        /* ä¸‹æ‹‰èœå•æ ·å¼ */
        .dropdown {
            position: relative;
            display: inline-block;
            z-index: 1001;
        }

        .dropdown-btn {
            background: linear-gradient(90deg, rgba(0, 180, 255, 0.7), rgba(60, 100, 180, 0.7));
            color: white;
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 0 8px rgba(0, 180, 255, 0.3);
            transition: all 0.3s ease;
        }

        .dropdown-btn:hover {
            background: linear-gradient(90deg, rgba(0, 200, 255, 0.8), rgba(80, 120, 200, 0.8));
            transform: translateY(-2px);
            box-shadow: 0 0 12px rgba(0, 180, 255, 0.5);
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background: rgba(0, 10, 30, 0.9);
            min-width: 200px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            border: 1px solid rgba(0, 150, 255, 0.3);
            z-index: 1001;
            backdrop-filter: blur(10px);
        }

        .dropdown-content a {
            color: #e0e0e0;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .dropdown-content a:last-child {
            border-bottom: none;
        }

        .dropdown-content a:hover {
            background: rgba(0, 150, 255, 0.3);
            color: #00c8ff;
            padding-left: 20px;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown-icon {
            font-size: 18px;
        }

        /* ä¸»å®¹å™¨ - ç¼©å°å¹¶å±…ä¸­ */
        .container {
            width: 80%;
            max-width: 700px;
            margin: 20px auto;
            margin-bottom:10px;
            background: rgba(0, 10, 30, 0.7);
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(0, 200, 255, 0.3);
            border: 1px solid rgba(0, 180, 255, 0.4);
            /* overflow: hidden; */
            backdrop-filter: blur(10px);
            flex-grow: 1;
        }

        /* å†…å®¹åŒºåŸŸ */
        .content {
            padding: 25px;
        }

        /* ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ */
        .user-card {
            background: rgba(0, 20, 40, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid rgba(0, 150, 255, 0.2);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .user-avatar {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00c8ff, #4a69bd);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 35px;
            color: white;
            box-shadow: 0 0 20px rgba(0, 200, 255, 0.5);
        }

        .user-info {
            text-align: center;
        }

        .user-name {
            font-size: 1.6em;
            margin: 0 0 5px 0;
            color: #00c8ff;
        }

        .user-role {
            display: inline-block;
            background: rgba(0, 150, 255, 0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            color: #00c8ff;
            border: 1px solid rgba(0, 150, 255, 0.3);
        }

        /* åŠŸèƒ½åŒºåŸŸ */
        .functions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
        }

        .function-card {
            background: rgba(0, 20, 40, 0.5);
            border-radius: 10px;
            padding: 18px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 150, 255, 0.2);
        }

        .function-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 200, 255, 0.2);
            border-color: rgba(0, 200, 255, 0.5);
        }

        .function-icon {
            font-size: 2.2em;
            color: #00c8ff;
            margin-bottom: 12px;
        }

        .function-title {
            font-size: 1.2em;
            margin: 0 0 8px 0;
            color: #00c8ff;
        }

        .function-desc {
            font-size: 0.85em;
            color: #a0d0ff;
            margin: 0;
        }

        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: rgba(0, 20, 40, 0.9);
            width: 90%;
            max-width: 500px;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 0 30px rgba(0, 200, 255, 0.4);
            border: 1px solid rgba(0, 150, 255, 0.4);
            backdrop-filter: blur(10px);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(0, 150, 255, 0.3);
            padding-bottom: 15px;
        }

        .modal-title {
            font-size: 1.4em;
            color: #00c8ff;
            margin: 0;
        }

        .close-btn {
            background: none;
            border: none;
            color: #a0d0ff;
            font-size: 1.5em;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close-btn:hover {
            color: #00c8ff;
        }

        .form-group {
            margin-bottom: 18px;
            margin-right: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #a0d0ff;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 10px 12px;
            background: rgba(0, 30, 60, 0.5);
            border: 1px solid rgba(0, 150, 255, 0.3);
            border-radius: 5px;
            color: #e0e0e0;
            font-size: 1em;
            transition: all 0.3s;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #00c8ff;
            box-shadow: 0 0 10px rgba(0, 200, 255, 0.3);
        }

        .btn {
            background: linear-gradient(90deg, #00c8ff, #4a69bd);
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            width: 60%;
            font-weight: bold;
            letter-spacing: 1px;
            margin-top: 30px;
            /* å±…ä¸­å…³é”®ä»£ç  ğŸ‘‡ */
            display: block;
            margin: 30px auto;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 200, 255, 0.4);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                width: 95%;
                margin: 15px auto;
            }
            
            .header-title {
                font-size: 1.8em;
            }
            
            .header-date {
                left: 0;
                font-size: 0.9em;
            }
            
            .functions {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 95%;
                padding: 20px;
            }
            
            .dropdown-btn {
                padding: 8px 15px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <!-- å¤´éƒ¨ -->
    <div class="header">
        <!-- å·¦ä¾§ä¸‹æ‹‰èœå• -->
        <div class="dropdown">
            <button class="dropdown-btn">
                <i class="dropdown-icon">â˜°</i> å¯¼èˆªèœå•
            </button>
            <div class="dropdown-content">
                <a href="dashboard.html">æ°”è±¡ç›‘æµ‹å¤§å±</a>
                <a href="data-analysis.html">æ•°æ®åˆ†æä¸­å¿ƒ</a>
                <a href="device-management.html">è®¾å¤‡ç®¡ç†ç³»ç»Ÿ</a>
                <a href="weather-forecast.html">æ°”è±¡é¢„æŠ¥</a>
                <a href="alert-center.html">é¢„è­¦ä¸­å¿ƒ</a>
                <a href="user-center.html">ç”¨æˆ·ä¸ªäººä¸­å¿ƒ</a>
            </div>
        </div>
        <h1 class="header-title">ç”¨æˆ·ä¸ªäººä¸­å¿ƒ</h1>
        <span class="header-date" id="current-date-time"></span>
    </div>

    <!-- ä¸»å®¹å™¨ -->
    <div class="container">
        <div class="content">
            <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
            <div class="user-card">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-info">
                    <h2 class="user-name" id="username">å¼ å·¥ç¨‹å¸ˆ</h2>
                    <span class="user-role" id="userrole">ç®¡ç†å‘˜</span>
                </div>
            </div>
            
            <!-- åŠŸèƒ½åŒºåŸŸ -->
            <div class="functions">
                <div class="function-card" onclick="openModal('passwordModal')">
                    <div class="function-icon">
                        <i class="fas fa-key"></i>
                    </div>
                    <h3 class="function-title">ä¿®æ”¹å¯†ç </h3>
                    <p class="function-desc">å®šæœŸæ›´æ”¹å¯†ç ä»¥æé«˜è´¦æˆ·å®‰å…¨æ€§</p>
                </div>
                
                <div class="function-card" onclick="openModal('emailModal')">
                    <div class="function-icon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <h3 class="function-title">ä¿®æ”¹é‚®ç®±</h3>
                    <p class="function-desc">æ›´æ–°æ‚¨çš„è”ç³»é‚®ç®±åœ°å€</p>
                </div>
                
                <div class="function-card" onclick="openModal('roleModal')">
                    <div class="function-icon">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <h3 class="function-title">ä¿®æ”¹èº«ä»½æƒé™</h3>
                    <p class="function-desc">è°ƒæ•´æ‚¨çš„ç³»ç»Ÿè®¿é—®æƒé™</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ä¿®æ”¹å¯†ç æ¨¡æ€æ¡† -->
    <div id="passwordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ä¿®æ”¹å¯†ç </h3>
                <button class="close-btn" onclick="closeModal('passwordModal')">&times;</button>
            </div>
            <form id="passwordForm">
                <div class="form-group">
                    <label for="currentPassword">å½“å‰å¯†ç </label>
                    <input type="password" id="currentPassword" required>
                </div>
                <div class="form-group">
                    <label for="newPassword">æ–°å¯†ç </label>
                    <input type="password" id="newPassword" required>
                </div>
                <div class="form-group">
                    <label for="confirmNewPassword">ç¡®è®¤æ–°å¯†ç </label>
                    <input type="password" id="confirmNewPassword" required>
                </div>
                <button type="submit" class="btn">ç¡®è®¤ä¿®æ”¹</button>
            </form>
        </div>
    </div>
    
    <!-- ä¿®æ”¹é‚®ç®±æ¨¡æ€æ¡† -->
    <div id="emailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ä¿®æ”¹é‚®ç®±</h3>
                <button class="close-btn" onclick="closeModal('emailModal')">&times;</button>
            </div>
            <form id="emailForm">
                <div class="form-group">
                    <label for="currentEmail">å½“å‰é‚®ç®±</label>
                    <input type="email" id="currentEmail" value="zhang@example.com" readonly>
                </div>
                <div class="form-group">
                    <label for="newEmail">æ–°é‚®ç®±åœ°å€</label>
                    <input type="email" id="newEmail" required>
                </div>
                <div class="form-group">
                    <label for="emailPassword">å½“å‰å¯†ç </label>
                    <input type="password" id="emailPassword" required>
                </div>
                <button type="submit" class="btn">ç¡®è®¤ä¿®æ”¹</button>
            </form>
        </div>
    </div>
    
    <!-- ä¿®æ”¹èº«ä»½æƒé™æ¨¡æ€æ¡† -->
    <div id="roleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ä¿®æ”¹èº«ä»½æƒé™</h3>
                <button class="close-btn" onclick="closeModal('roleModal')">&times;</button>
            </div>
            <form id="roleForm">
                <div class="form-group">
                    <label for="currentRole">å½“å‰èº«ä»½</label>
                    <input type="text" id="currentRole" value="ç®¡ç†å‘˜" readonly>
                </div>
                <div class="form-group">
                    <label for="newRole">æ–°èº«ä»½</label>
                    <select id="newRole" required>
                        <option value="">è¯·é€‰æ‹©èº«ä»½</option>
                        <option value="guest">è®¿å®¢</option>
                        <option value="user">æ™®é€šç”¨æˆ·</option>
                        <option value="admin">ç®¡ç†å‘˜</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="rolePassword">å½“å‰å¯†ç </label>
                    <input type="password" id="rolePassword" required>
                </div>
                <button type="submit" class="btn">ç¡®è®¤ä¿®æ”¹</button>
            </form>
        </div>
    </div>
    <script>
         // è·å–å½“å‰æ—¥æœŸå’Œæ—¶é—´å¹¶æ ¼å¼åŒ–
        function updateDateTime() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            const weekDays = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'];
            const weekDay = weekDays[now.getDay()];

            const formattedDate = `${year}-${month}-${day} ${weekDay} ${hours}:${minutes}:${seconds}`;
            document.getElementById('current-date-time').textContent = formattedDate;
        }

        // åˆå§‹åŒ–æ—¶ç«‹å³æ›´æ–°ä¸€æ¬¡
        updateDateTime();

        // æ¯ç§’æ›´æ–°ä¸€æ¬¡æ—¶é—´
        setInterval(updateDateTime, 1000);




        
        // API åŸºç¡€URL
        const API_BASE_URL = '/api';

        // å…¨å±€å˜é‡
        let currentUserId = null;
        let currentUserData = null;

        // æ£€æŸ¥ç™»å½•çŠ¶æ€å¹¶åŠ è½½ç”¨æˆ·ä¿¡æ¯
        function checkAuth() {
            const token = localStorage.getItem('token');
            const user = localStorage.getItem('user');
            
            if (!token || !user) {
                window.location.href = '/';
                return;
            }
            
            // æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯
            currentUserData = JSON.parse(user);
            document.getElementById('username').textContent = currentUserData.username || 'ç”¨æˆ·';
            document.getElementById('userrole').textContent = getRoleText(currentUserData.role);
            currentUserId = currentUserData.id || 1;
            
            // è®¾ç½®è¡¨å•ä¸­çš„å½“å‰å€¼
            document.getElementById('currentEmail').value = currentUserData.email || '';
            document.getElementById('currentRole').value = getRoleText(currentUserData.role);
        }

        // è·å–è§’è‰²æ–‡æœ¬æ˜¾ç¤º
        function getRoleText(role) {
            const roleMap = {
                'GUEST': 'è®¿å®¢',
                'USER': 'æ™®é€šç”¨æˆ·', 
                'ADMIN': 'ç®¡ç†å‘˜',
            };
            return roleMap[role] || 'ç”¨æˆ·';
        }

        // è·å–è§’è‰²å€¼
        function getRoleValue(roleText) {
            const roleMap = {
                'è®¿å®¢': 'GUEST',
                'æ™®é€šç”¨æˆ·': 'USER',
                'ç®¡ç†å‘˜': 'ADMIN',
            };
            return roleMap[roleText] || 'USER';
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            checkAuth();
            
            // ç»‘å®šè¡¨å•æäº¤äº‹ä»¶
            bindFormEvents();
        });


        // ç»‘å®šè¡¨å•æäº¤äº‹ä»¶
        function bindFormEvents() {
            //æå–ç”¨æˆ·id
            const user = localStorage.getItem('user');
            currentUserData = JSON.parse(user);
            currentUserId = currentUserData.id;
            // ä¿®æ”¹å¯†ç è¡¨å•
            document.getElementById('passwordForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const currentPassword = document.getElementById('currentPassword').value;
                const newPassword = document.getElementById('newPassword').value;
                const confirmNewPassword = document.getElementById('confirmNewPassword').value;
                
                if (newPassword !== confirmNewPassword) {
                    alert('æ–°å¯†ç ä¸ç¡®è®¤å¯†ç ä¸ä¸€è‡´ï¼');
                    return;
                }
                
                try {
                    const token = localStorage.getItem('token');
                    const response = await fetch(`${API_BASE_URL}/user/password-modify`, {
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer ' + token
                        },
                        body: JSON.stringify({
                            currentUserId,
                            currentPassword,
                            newPassword
                        })
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        alert('å¯†ç ä¿®æ”¹æˆåŠŸï¼');
                        closeModal('passwordModal');
                        this.reset();
                    } else {
                        alert('å¯†ç ä¿®æ”¹å¤±è´¥ï¼š' + (result.message || 'æœªçŸ¥é”™è¯¯'));
                    }
                } catch (error) {
                    console.error('ä¿®æ”¹å¯†ç å¤±è´¥:', error);
                    alert('ä¿®æ”¹å¯†ç å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥');
                }
            });
            
            // ä¿®æ”¹é‚®ç®±è¡¨å•
            document.getElementById('emailForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const newEmail = document.getElementById('newEmail').value;
                const emailPassword = document.getElementById('emailPassword').value;
                
                try {
                    const token = localStorage.getItem('token');
                    const response = await fetch(`${API_BASE_URL}/user/email-modify`, {
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer ' + token
                        },
                        body: JSON.stringify({
                            userId: currentUserId,
                            password: emailPassword,
                            newEmail: newEmail
                        })
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        // æ›´æ–°æœ¬åœ°å­˜å‚¨çš„ç”¨æˆ·æ•°æ®
                        currentUserData.email = newEmail;
                        localStorage.setItem('user', JSON.stringify(currentUserData));
                        
                        alert('é‚®ç®±ä¿®æ”¹æˆåŠŸï¼');
                        closeModal('emailModal');
                        this.reset();
                    } else {
                        alert('é‚®ç®±ä¿®æ”¹å¤±è´¥ï¼š' + (result.message || 'æœªçŸ¥é”™è¯¯'));
                    }
                } catch (error) {
                    console.error('ä¿®æ”¹é‚®ç®±å¤±è´¥:', error);
                    alert('ä¿®æ”¹é‚®ç®±å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥');
                }
            });
            
            // ä¿®æ”¹èº«ä»½æƒé™è¡¨å•
            document.getElementById('roleForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const newRole = document.getElementById('newRole').value;
                const rolePassword = document.getElementById('rolePassword').value;
                
                if (!newRole) {
                    alert('è¯·é€‰æ‹©æ–°çš„èº«ä»½æƒé™ï¼');
                    return;
                }
                
                try {
                    const token = localStorage.getItem('token');
                    const response = await fetch(`${API_BASE_URL}/user/role-modify`, {
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer ' + token
                        },
                        body: JSON.stringify({
                            userId: currentUserId,
                            password: rolePassword,
                            newRole: getRoleValue(newRole)
                        })
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        // æ›´æ–°æœ¬åœ°å­˜å‚¨çš„ç”¨æˆ·æ•°æ®å’Œé¡µé¢æ˜¾ç¤º
                        currentUserData.role = getRoleValue(newRole);
                        localStorage.setItem('user', JSON.stringify(currentUserData));
                        
                        document.getElementById('userrole').textContent = newRole;
                        document.getElementById('currentRole').value = newRole;
                        
                        alert('èº«ä»½æƒé™ä¿®æ”¹æˆåŠŸï¼');
                        closeModal('roleModal');
                        this.reset();
                    } else {
                        alert('èº«ä»½æƒé™ä¿®æ”¹å¤±è´¥ï¼š' + (result.message || 'æœªçŸ¥é”™è¯¯'));
                    }
                } catch (error) {
                    console.error('ä¿®æ”¹èº«ä»½æƒé™å¤±è´¥:', error);
                    alert('ä¿®æ”¹èº«ä»½æƒé™å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥');
                }
            });
        }

        // æ¨¡æ€æ¡†æ§åˆ¶å‡½æ•°
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }

        // é€€å‡ºç™»å½•
        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            window.location.href = '/';
        }
    </script>
</body>
</html>